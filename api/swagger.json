{
    "swagger": "2.0",
    "info": {
        "version": "1.0.0",
        "title": "Patient Manager Service",
        "description": "Keeps patient records."
    },
    "tags" : [
        {
            "name" : "patient",
            "description": "Everything about the patient"
        },
        {
            "name" : "diagnostic",
            "description": "For diagnostic purposes"
        }
    ],
    "basePath": "/api/v1",
    "paths": {
        "/ping": {
            "get": {
                "tags" : [ "diagnostic" ],
                "summary": "Validates that the service is running and responding to requests",
                "description": "Validates that the service is running and responding to requests. It will also return the last time data was received.",
                "produces": [
                    "application/json",
                    "text/plain"
                ],
                "responses": {
                    "200": {
                        "description": "Successful response"
                    },
                    "404": {
                        "description": "Endpoint Not Found",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/patient": {
            "post": {
                "tags" : [ "patient" ],
                "summary": "posts patient record for storage",
                "description": "accepts patient details in JSON form and stores it Postgres db for persistence",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "text"
                ],
                "parameters": [
                    {
                        "name": "patient info",
                        "in": "body",
                        "description": "patient details",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/PatientInfo"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully stored patient data"
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            },
            "get": {
                "tags" : [ "patient" ],
                "summary": "returns all patient stored",
                "description": "returns all patient stored in postgres db",
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "successfully retrived all patients",
                        "schema": {
                            "$ref": "#/definitions/PatientInfos"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "ProcessInfo": {
            "type": "object",
            "description": "This is used primarily for debugging so the data returned can change depending on the need. The data given below should be considered the minimum.",
            "properties": {
                "predix-space": {
                    "type": "string"
                },
                "instance-no": {
                    "type": "integer"
                },
                "uptime": {
                    "type": "number"
                },
                "max-go-threads": {
                    "type": "integer"
                },
                "bytesUsed": {
                    "type": "number"
                },
                "bytesAvail": {
                    "type": "number"
                }
            }
        },
        "ReportInfo": {
            "type": "object",
            "properties": {
                "pairingId": {
                    "type": "integer"
                },
                "pairingNumber": {
                    "type": "string"
                },
                "LegStartUTC": {
                    "type": "string"
                },
                "isLegDeadHead": {
                    "type": "boolean"
                },
                "connectTimeMins": {
                    "type": "integer"
                },
                "stayWithAcft": {
                    "type": "boolean"
                },
                "isLastLeg": {
                    "type": "boolean"
                },
                "cityPair": {
                    "type": "string"
                },
                "LastLegCityPair": {
                    "type": "string"
                },
                "a0": {
                    "type": "number"
                },
                "missedConnectProb": {
                    "type": "number"
                },
                "canProb": {
                    "type": "number"
                },
                "legRobustnessProb": {
                    "type": "number"
                },
                "schDutyDuration": {
                    "type": "integer"
                },
                "maxDutyDuration": {
                    "type": "integer"
                },
                "dutyMargin": {
                    "type": "integer"
                },
                "restMargin": {
                    "type": "integer"
                },
                "dutyFromLegRobustness": {
                    "type": "number"
                },
                "dutyFailFromLeg": {
                    "type": "number"
                },
                "dutyExceedanceProb": {
                    "type": "number"
                },
                "restExceedanceProb": {
                    "type": "number"
                },
                "dutyRobustnessProb": {
                    "type": "number"
                },
                "robustnessProb": {
                    "type": "number"
                },
                "opDate": {
                    "type": "string"
                },
                "pairOccurences": {
                    "type": "integer"
                },
                "pairLowestLegActualCount": {
                    "type": "integer"
                },
                "legActualCount": {
                    "type": "integer"
                },
                "origin": {
                    "type": "string"
                },
                "dest": {
                    "type": "string"
                },
                "fltNum": {
                    "type": "string"
                },
                "crewBase": {
                    "type": "string"
                },
                "crewComplement": {
                    "type": "integer"
                }
            }
        },
        "DateRange": {
            "type": "object",
            "required": [ "startDate", "endDate" ],
            "properties": {
                "startDate": {
                    "description": "date on YYYYMMDD format",
                    "type": "string"
                },
                "endDate": {
                    "description": "date on YYYYMMDD format",
                    "type": "string"
                }
            }
        },
        "PatientInfo": {
            "type": "object",
            "required": ["name","weight","height","age","gender","bustsize","waistsize","hipsize"],
            "properties": {
                "id": {
                    "description": "id assigned by DB, cannot be defined by user",
                    "type": "number"
                },
                "name": {
                    "description": "name of patient",
                    "type": "string"
                },
                "weight": {
                    "description": "weight of patient in pounds",
                    "type": "number"
                },
                "height": {
                    "description": "height of patient in inches",
                    "type": "number"
                },
                "age": {
                    "description": "years of age",
                    "type": "number"
                },
                "gender": {
                    "description": "gender of patient (male/female)",
                    "type": "string"
                },
                "bustsize": {
                    "description": "bust size in inches",
                    "type": "number"
                },
                "waistsize": {
                    "description": "waist size in inches",
                    "type": "number"
                },
                "hipsize": {
                    "description": "hip size in inches",
                    "type": "number"
                }
            }
        },
        "PatientInfos": {
            "type" : "array",
            "items": {
                "$ref": "#/definitions/PatientInfo"
            }
        }
    }
}